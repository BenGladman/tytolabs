import{a as l,i as fe,p as j,b as P,h as f,c as u,m as w,d as T,s as R,e as Ve,o as g,f as De,_ as I,g as ze,j as Ge,k as Ke,l as Ye,n as Je,q as Me,r as A,t as qe,u as Qe,v as Xe,w as O,x as de,y as Ze,z as et,A as tt,B as ge,C as nt,D as pe,E as rt,F as he,G as me,H as U,I as st}from"./chunk-1a5d7d8d.js";function b(e){return typeof e!="object"||e===null?!1:Object.getPrototypeOf(e)===null?!0:e.constructor.name==="Object"}function Z(e){return"["+e.map(t=>"'"+t+"'").join(", ")+"]"}function z(e){var t,n;"urlPathname"in e?(l(((t=Object.getOwnPropertyDescriptor(e,"urlPathname"))===null||t===void 0?void 0:t.get)===ee),l(((n=Object.getOwnPropertyDescriptor(e,"urlParsed"))===null||n===void 0?void 0:n.get)===te)):(Object.defineProperty(e,"urlPathname",{get:ee,enumerable:!0,configurable:!0}),Object.defineProperty(e,"urlParsed",{get:te,enumerable:!0,configurable:!0}))}function ye(e){let{url:t}=e;const{_baseUrl:n,_urlProcessor:s}=e;return l(n.startsWith("/")),l(s===null||fe(s)),s!==null&&(t=s(t)),j(t,n)}function ee(){const{pathname:e}=ye(this),t=e;return l(t.startsWith("/")),t}function te(){const e=ye(this),{origin:t,pathname:n,pathnameOriginal:s,search:r,searchAll:i,searchOriginal:o,hash:a,hashOriginal:d}=e,p={origin:t,pathname:n,pathnameOriginal:s,search:r,searchAll:i,searchOriginal:o,hash:a,hashOriginal:d,get hashString(){return P(!1,"`pageContext.urlParsed.hashString` has been renamed to `pageContext.urlParsed.hashOriginal`",{onlyOnce:!0,showStackTrace:!0}),d},get searchString(){return P(!1,"`pageContext.urlParsed.searchString` has been renamed to `pageContext.urlParsed.searchOriginal`",{onlyOnce:!0,showStackTrace:!0}),o}};return ne(p,"hashString"),ne(p,"searchString"),p}function ne(e,t){const n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(e,t,{...n,enumerable:!1})}function it(e,t){if(!b(e))return!1;for(const n of Object.keys(e))if(!t.includes(n))return!1;return!0}function ot(e){return f(e,"then")&&fe(e.then)}const G="@",D=":";function K(e,t){u(e==="*"||e.startsWith("/"),`Invalid route string \`${e}\`${e===""?" (empty string)":""}: route strings should start with a leading slash \`/\` (or be \`*\`).`),l(t.startsWith("/"));const n=e.split("/"),s=t.split("/"),r={};at(e),e==="*"&&(e="/*");for(let i=0;i<Math.max(n.length,s.length);i++){const o=n[i],a=s[i];if(o==="*")return r["*"]=s.slice(Math.max(1,i)).join("/"),{routeParams:r};if(o&&k(o)){if(P(!o.startsWith(D),`Outdated route string \`${e}\`, use \`${e.split(D).join(G)}\` instead.`,{onlyOnce:!0}),!a)return null;r[o.slice(1)]=a}else if((o||"")!==(a||""))return null}return{routeParams:r}}function at(e){const t=e.split("*").length-1;u(t<=1,`Invalid route string \`${e}\`: route strings are not allowed to contain more than one glob character \`*\`.`),u(t===0||t===1&&e.endsWith("*"),`Invalid route string \`${e}\`: make sure your route string ends with the glob character \`*\`.`)}function F(e){const t=e.split("/").filter(o=>o!==""&&o!=="*");let n=0;for(const o of t){if(k(o))break;n++}const s=t.filter(o=>!k(o)).length,r=t.filter(o=>k(o)).length,i=e.endsWith("*");return{numberOfParameterSegments:r,numberOfStaticSegmentsBeginning:n,numberOfStaticSegements:s,isCatchAll:i}}function k(e){return e.startsWith(G)||e.startsWith(D)}function re(e){const n=K(e,e);return n!==null&&Object.keys(n.routeParams).length===0}function lt(e){e.sort(ut).sort(w(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence<0)).sort(w(t=>t.routeType==="STRING"&&re(t.routeString)===!1)).sort(w(t=>t.routeType==="FUNCTION"&&!t.precedence)).sort(w(t=>t.routeType==="STRING"&&re(t.routeString)===!0)).sort(w(t=>t.routeType==="FILESYSTEM")).sort(w(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence>0))}function ut(e,t){var n,s;{const r=(n=e.precedence)!==null&&n!==void 0?n:0,i=(s=t.precedence)!==null&&s!==void 0?s:0;if(r!==i)return r>i?-1:1}if(!t.routeString||!e.routeString)return 0;{const i=T(o=>F(o).numberOfStaticSegmentsBeginning)(e.routeString,t.routeString);if(i!==0)return i}{const i=T(o=>F(o).numberOfStaticSegements)(e.routeString,t.routeString);if(i!==0)return i}{const i=T(o=>F(o).numberOfParameterSegments)(e.routeString,t.routeString);if(i!==0)return i}{if(F(t.routeString).isCatchAll)return-1;if(F(e.routeString).isCatchAll)return 1}return 0}function ct(e,t){return pt(e)?K(e,t):ft(e,t)}function ft(e,t){return t=dt(t),l(t.startsWith("/")),l(e.startsWith("/")),l(!t.endsWith("/")||t==="/"),l(!e.endsWith("/")||e==="/"),t!==e?null:{routeParams:{}}}function dt(e){if(!e.endsWith("/"))return e;for(;e.endsWith("/");)e=R(e,0,-1);return e===""?"/":e}function gt(e,t){const s=t.filter(({filesystemRoot:i})=>e.startsWith(i)).sort(T(({filesystemRoot:i})=>i.length))[0];let r;if(s){const{filesystemRoot:i,routeRoot:o}=s,a={pageId:e,filesystemRoot:i,routeRoot:o};l(o.startsWith("/")&&e.startsWith("/")&&i.startsWith("/"),a),l(e.startsWith(i),a),i!=="/"?(l(!i.endsWith("/"),a),r=R(e,i.length,0)):r=e,l(r.startsWith("/"),a),r=o+(o.endsWith("/")?"":"/")+R(r,1,0)}else r=e;return l(r.startsWith("/")),r=r.split("/").filter(i=>i!=="pages"&&i!=="src"&&i!=="index").join("/"),l(!r.includes(".page.")),l(!r.endsWith(".")),r.endsWith("/index")&&(r=R(r,0,-6)),r===""&&(r="/"),l(r.startsWith("/")),l(!r.endsWith("/")||r==="/"),r}function pt(e){return e.includes(G)}async function ht(e,t,n,s){let r=e.default({url:t,pageContext:n});if(u(!ot(r)||e.iKnowThePerformanceRisksOfAsyncRouteFunctions,`The Route Function ${s} returned a promise; async route functions are opt-in, see https://vite-plugin-ssr.com/route-function#async`),await r,r===!1)return null;r===!0&&(r={}),u(b(r),`The Route Function ${s} should return a boolean or a plain JavaScript object, instead it returns \`${f(r,"constructor")?r.constructor:r}\`.`);let i=null;f(r,"precedence")&&(i=r.precedence,u(typeof i=="number",`The \`precedence\` value returned by the Route Function ${s} should be a number.`)),u(!("pageContext"in r),"Providing `pageContext` in Route Functions is forbidden, see https://vite-plugin-ssr.com/route-function#async"),_e(r,`The \`routeParams\` object returned by the Route Function ${s} should`);const o=r.routeParams||{};return l(b(o)),Object.keys(r).forEach(a=>{u(a==="match"||a==="routeParams"||a==="precedence",`The Route Function ${s} returned an object with an unknown key \`{ ${a} }\`. Allowed keys: ['match', 'routeParams', 'precedence'].`)}),{precedence:i,routeParams:o}}function _e(e,t){l(t.endsWith(" should")),f(e,"routeParams")&&(u(b(e.routeParams),`${t} be a plain JavaScript object.`),u(Object.values(e.routeParams).every(n=>typeof n=="string"),`${t} only hold string values.`))}function be(e,{hook:t,errorMessagePrefix:n}){if(!n){l(t);const{hookName:s,hookFilePath:r}=t;l(r.startsWith("/")),l(!s.endsWith(")")),n=`The \`pageContext\` provided by the \`export { ${s} }\` of ${r}`}u(Ve(e),`${n} should be an object.`),u(!("_objectCreatedByVitePluginSsr"in e),`${n} should not be the whole \`pageContext\` object, see https://vite-plugin-ssr.com/pageContext-manipulation#do-not-return-entire-pagecontext`),P(!("_pageId"in e),"You are using `onBeforeRoute()` to override vite-plugin-ssr routing. This is experimental: make sure to contact a vite-plugin-ssr maintainer before using this.",{onlyOnce:!0})}async function mt(e,t){const n=await e.onBeforeRoute(t),s=`The \`onBeforeRoute()\` hook exported by ${e.filePath}`;if(u(n==null||it(n,["pageContext"])&&f(n,"pageContext"),`${s} should return \`null\`, \`undefined\`, or a plain JavaScript object \`{ pageContext: { /* ... */ } }\`.`),n==null)return null;if(u(f(n,"pageContext","object"),`${s} returned \`{ pageContext }\` but \`pageContext\` should be a plain JavaScript object.`),f(n.pageContext,"_pageId")&&!f(n.pageContext,"_pageId","null")){const i=`${s} returned \`{ pageContext: { _pageId } }\` but \`_pageId\` should be`;u(f(n.pageContext,"_pageId","string"),`${i} a string or \`null\``),u(t._allPageIds.includes(n.pageContext._pageId),`${i} one of following values: \`[${t._allPageIds.map(o=>`'${o}'`).join(", ")}]\`.`)}f(n.pageContext,"routeParams")&&_e(n.pageContext,`${s} returned \`{ pageContext: { routeParams } }\` but \`routeParams\` should`);const r={};return f(n.pageContext,"url")&&(u(f(n.pageContext,"url","string"),`${s} returned \`{ pageContext: { url } }\` but \`url\` should be a string`),g(r,{_urlOriginal:t.url})),be(n.pageContext,{hook:{hookFilePath:e.filePath,hookName:"onBeforeRoute"}}),g(r,n.pageContext),r}async function yt(e){let t=null;const n=[];await Promise.all(e._pageFilesAll.filter(o=>o.fileType===".page.route").map(o=>{var a;return(a=o.loadFile)===null||a===void 0?void 0:a.call(o)})),e._pageFilesAll.filter(o=>o.fileType===".page.route"&&o.isDefaultPageFile).forEach(({filePath:o,fileExports:a})=>{if(l(a),"onBeforeRoute"in a){u(f(a,"onBeforeRoute","function"),`\`export { onBeforeRoute }\` of ${o} should be a function.`);const{onBeforeRoute:d}=a;t={filePath:o,onBeforeRoute:d}}"filesystemRoutingRoot"in a&&(u(f(a,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${o} should be a string.`),u(f(a,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${o} is \`'${a.filesystemRoutingRoot}'\` but it should start with a leading slash \`/\`.`),n.push({filesystemRoot:bt(o),routeRoot:a.filesystemRoutingRoot}))});const s=e._allPageIds,r=[];return s.filter(o=>!De(o)).filter(o=>{const a=_t(o,e._pageFilesAll);if(!a)return!0;const{filePath:d,fileExports:p}=a;l(p),u("default"in p,`${d} should have a default export.`),u(f(p,"default","string")||f(p,"default","function"),`The default export of ${d} should be a string or a function.`),u(!("iKnowThePerformanceRisksOfAsyncRouteFunctions"in p)||f(p,"iKnowThePerformanceRisksOfAsyncRouteFunctions","boolean"),`The export \`iKnowThePerformanceRisksOfAsyncRouteFunctions\` of ${d} should be a boolean.`);const c=p.default;return r.push({pageId:o,filesystemRoute:null,pageRouteFile:{filePath:d,fileExports:p,routeValue:c}}),!1}).forEach(o=>{const a=gt(o,n);l(a.startsWith("/")),l(!a.endsWith("/")||a==="/"),r.push({pageId:o,filesystemRoute:a,pageRouteFile:null})}),{pageRoutes:r,onBeforeRouteHook:t}}function _t(e,t){return t.find(n=>n.pageId===e&&n.fileType===".page.route")}function bt(e){l(e.startsWith("/")),l(!e.endsWith("/"));const t=e.split("/"),n=R(t,0,-1).join("/")||"/";return l(n.startsWith("/")),l(!n.endsWith("/")||n==="/"),n}var E;function se(...e){var t,n;E||(E=(n=(t=globalThis).__brillout_debug_createDebugger)===null||n===void 0?void 0:n.call(t,"vps:routing")),E&&E(...e)}async function ve(e){z(e);const{pageRoutes:t,onBeforeRouteHook:n}=await yt(e);se("Pages routes:",t.map(c=>({pageId:c.pageId,filesystemRoute:c.filesystemRoute,pageRouteFile:c.pageRouteFile&&{filePath:c.pageRouteFile.filePath,routeValue:c.pageRouteFile.routeValue}})));const s={};if(n){const c=await mt(n,e);if(c){if(g(s,c),f(s,"_pageId","string")||f(s,"_pageId","null"))return f(s,"routeParams")?l(f(s,"routeParams","object")):g(s,{routeParams:{}}),g(s,{_routingProvidedByOnBeforeRouteHook:!0,_routeMatches:"CUSTOM_ROUTE"}),{pageContextAddendum:s};g(e,s)}}g(s,{_routingProvidedByOnBeforeRouteHook:!1});const r=e._allPageIds;l(r.length>=0),u(r.length>0,"No `*.page.js` file found. You must create a `*.page.js` file, e.g. `pages/index.page.js` (or `pages/index.page.{jsx, tsx, vue, ...}`).");const{urlPathname:i}=e;l(i.startsWith("/"));const o=[];await Promise.all(t.map(async c=>{const{pageId:m,filesystemRoute:S,pageRouteFile:x}=c;if(x){const y=x.fileExports,v=x.filePath;if(f(y,"default","string")){const h=y.default;u(h.startsWith("/"),`A Route String should start with a leading \`/\` but \`${v}\` has \`export default '${h}'\`. Make sure to \`export default '/${h}'\` instead.`);const _=K(h,i);if(_){const{routeParams:L}=_;o.push({pageId:m,routeString:h,routeParams:L,routeType:"STRING"})}}else if(f(y,"default","function")){const h=await ht(y,i,e,v);if(h){const{routeParams:_,precedence:L}=h;o.push({pageId:m,precedence:L,routeParams:_,routeType:"FUNCTION"})}}else l(!1)}else{const y=ct(S,i);if(y){const{routeParams:v}=y;o.push({pageId:m,routeParams:v,routeType:"FILESYSTEM"})}}})),lt(o);const a=o[0];if(se(`Route matches for URL \`${i}\` (in precedence order):`,o),g(s,{_routeMatches:o}),!a)return g(s,{_pageId:null,routeParams:{}}),{pageContextAddendum:s};const{pageId:d,routeParams:p}=a;return l(b(p)),g(s,{_pageId:d,routeParams:p}),{pageContextAddendum:s}}const Y={},Pe={},vt={},N={},Pt={},wt=!0,Rt={"/pages/gladman/index.page.tsx":()=>I(()=>import("./pages/gladman/index.page.6585835f.js"),["assets/pages/gladman/index.page.6585835f.js","assets/pages/gladman/index.page.39ca7c1b.css","assets/chunk-9e017cb6.js","assets/chunk-43108f40.js","assets/Header.module.a6164dc4.css"]),"/pages/index/index.page.tsx":()=>I(()=>import("./pages/index/index.page.a35f1245.js"),["assets/pages/index/index.page.a35f1245.js","assets/pages/index/index.page.63dd3d74.css","assets/chunk-9e017cb6.js"]),"/renderer/_error.page.tsx":()=>I(()=>import("./renderer/_error.page.d9a67e2e.js"),["assets/renderer/_error.page.d9a67e2e.js","assets/chunk-9e017cb6.js"])},St={...Rt};Y[".page"]=St;const xt={},Ft={...xt};Pe[".page.route"]=Ft;const Ot={"/renderer/_default.page.client.tsx":()=>I(()=>import("./renderer/_default.page.client.ed3ad223.js"),["assets/renderer/_default.page.client.ed3ad223.js","assets/renderer/_default.page.client.67d1e2d3.css","assets/chunk-9e017cb6.js","assets/chunk-43108f40.js","assets/Header.module.a6164dc4.css"])},At={...Ot};Y[".page.client"]=At;const Et={"/renderer/_default.page.client.tsx":ze},Ct={...Et};N[".page.client"]=Ct;const Tt={"/renderer/_default.page.server.tsx":Ge},It={...Tt};N[".page.server"]=It;const kt={"/pages/gladman/index.page.tsx":Ke,"/pages/index/index.page.tsx":Ye,"/renderer/_error.page.tsx":Je},Wt={...kt};N[".page"]=Wt;var $t=Object.freeze(Object.defineProperty({__proto__:null,pageFilesLazy:Y,pageFilesEager:Pe,pageFilesExportNamesLazy:vt,pageFilesExportNamesEager:N,neverLoaded:Pt,isGeneratedFile:wt},Symbol.toStringTag,{value:"Module"}));Me($t);function we(){const e="/";return jt(e)?"/":e}function jt(e){return!!e.startsWith("http")}function Re(e){return!e.startsWith("/")&&!e.startsWith(".")&&!e.startsWith("?")&&e!==""}function Nt(e,t){let n=!1;return()=>{n||(n=!0,setTimeout(()=>{n=!1,e()},t))}}function Ht(e){return j(e,"/").pathname}function H(e){window.location.href=e}const Lt="/";function Ut(e,t,n){l(t!==".pageContext.json"||n===!0);const{pathnameOriginal:s,searchOriginal:r,hashOriginal:i}=j(e,Lt);e.startsWith("/")&&l(e===`${s}${r||""}${i||""}`,{url:e});let o=s;if(n)o.endsWith("/")&&(o=R(o,0,-1)),l(!o.endsWith("/")),o===""&&(o="/index");else{const d=s.endsWith("/")?"":"/";o=o+`${d}index`}return`${o}${t}${r||""}${i||""}`}function Bt(){return!!Vt()}function Vt(){const e=window,t=!!e.__REACT_DEVTOOLS_GLOBAL_HOOK__,n=!!e.__vite_plugin_react_preamble_installed__,s=!!e.$RefreshReg$;return!t&&!n&&!s?!1:(P(t&&n&&s,"An internal heuristic needs to be updated, please reach out to a vite-plugin-ssr maintainer.",{onlyOnce:!0,showStackTrace:!0}),!0)}function Dt(e,t){return(e==null?void 0:e.message)===(t==null?void 0:t.message)}const zt=A();let ie=!1;const Se={markNavigationChange(){ie=!0},get noNavigationChangeYet(){return!ie&&this.isFirstUrl(A())},isFirstUrl(e){return e===zt}};function xe(e,t){return qe(e,t)}async function Gt(e,t){const s=xe(e,t).filter(i=>i.fileType===".page.server");return await Promise.all(s.map(async i=>{i.exportNames||(l(i.loadExportNames,t),await i.loadExportNames())})),{hasOnBeforeRenderServerSideOnlyHook:s.some(({exportNames:i})=>(l(i),i.includes("onBeforeRender")))}}function Kt(e,t,n,s){l(!t.endsWith(")"));const r=`The \`export { ${t} }\` of ${s}`;u(e==null||b(e),`${r} should return \`null\`, \`undefined\`, or a plain JavaScript object.`),e!=null&&(Yt(e,n,r),"pageContext"in e&&be(e.pageContext,{hook:{hookName:t,hookFilePath:s}}))}function Yt(e,t,n){const s=[],r=Object.keys(e);for(const i of r)t.includes(i)||s.push(i);u(s.length===0,[n,"returned an object with unknown keys",Z(s)+".","Only following keys are allowed:",Z(t)+"."].join(" "))}function Fe(e){return l([!0,!1].includes(e.isHydration)),l([!0,!1,null].includes(e.isBackwardNavigation)),Qe(e)}const oe=["urlPathname","urlParsed"],Jt=["Page","pageExports","exports"];function Oe(e){[...Jt,...oe].forEach(n=>{n in e&&(oe.includes(n)?(l(n.startsWith("url")),P(!1,`\`pageContext.${n}\` is already available in the browser when using \`useClientRouter()\`; including \`${n}\` in \`passToClient\` has no effect.`,{onlyOnce:!0})):P(!1,`\`pageContext.${n}\` is a built-in that cannot be overriden; including \`${n}\` in \`passToClient\` has no effect.`,{onlyOnce:!0}),delete e[n])})}async function Mt(e){return e._isFirstRenderAttempt&&Se.isFirstUrl(e.url)?(l(f(e,"_isFirstRenderAttempt","true")),qt(e)):(l(f(e,"_isFirstRenderAttempt","false")),Xt(e))}async function qt(e){const t=Xe();return Oe(t),g(t,{isHydration:!0,_comesDirectlyFromServer:!0}),g(t,await O(e._pageFilesAll,t._pageId)),t}async function Qt(e){const t=de(e._allPageIds);if(!t)throw new Error("No error page");const n={isHydration:!1,_pageId:t,_pageContextRetrievedFromServer:null,_comesDirectlyFromServer:!1};return g(n,await O(e._pageFilesAll,n._pageId)),n}async function Xt(e){let t={};g(t,{isHydration:!1}),g(t,await en(e)),g(t,await O(e._pageFilesAll,t._pageId));const n=await Zt({...e,...t});if(l([!0,!1].includes(n._comesDirectlyFromServer)),n._isError){t={},l(n._comesDirectlyFromServer===!0),l(f(n,"is404","boolean")),l(f(n,"pageProps","object")),l(f(n.pageProps,"is404","boolean")),l(!("serverSideError"in n));const s=de(e._allPageIds);return l(s),g(t,{isHydration:!1,_pageId:s}),g(t,n),g(t,await O(e._pageFilesAll,t._pageId)),t}else return g(t,n),t}async function Zt(e){const t=Ze(e,"onBeforeRender");if(t){const s=t.hook,r={_comesDirectlyFromServer:!1,_pageContextRetrievedFromServer:null},i=Fe({...e,...r}),o=await s(i);Kt(o,"onBeforeRender",["pageContext"],t.filePath);const a=o==null?void 0:o.pageContext;return g(r,a),r}else if((await Gt(e._pageFilesAll,e._pageId)).hasOnBeforeRenderServerSideOnlyHook){const s=await tn(e),r={};return Object.assign(r,s),g(r,{_comesDirectlyFromServer:!0,_pageContextRetrievedFromServer:s}),r}return{_comesDirectlyFromServer:!1,_pageContextRetrievedFromServer:null}}async function en(e){const n=(await ve(e)).pageContextAddendum;if(!n._pageId)throw new Error("No routing match");return l(f(n,"_pageId","string")),n}async function tn(e){var t;const n=Ut((t=e._urlOriginal)!==null&&t!==void 0?t:e.url,".pageContext.json",!0),s=await fetch(n);{const a=s.headers.get("content-type"),d=a&&a.includes("application/json");if(!d&&s.status===404){H(e.url);const p=new Error("Page doesn't exist");throw Object.assign(p,{_abortRendering:!0}),p}u(d,`Wrong HTTP Response Header \`content-type\` value for URL ${n} (it should be \`application/json\` but we got \`${a}\`). Make sure to use \`pageContext.httpResponse.contentType\`, see https://github.com/brillout/vite-plugin-ssr/issues/191`)}const r=await s.text(),i=et(r);if("serverSideError"in i)throw tt("`pageContext` could not be fetched from the server as an error occurred on the server; check your server logs.");l(f(i,"pageContext"));const o=i.pageContext;return l(b(o)),l(f(o,"_pageId","string")),Oe(o),o}let B;async function Ae(){return B||(B=await nn()),B}async function nn(){const e=we();ge(e);const t={_urlProcessor:null,_baseUrl:e,_objectCreatedByVitePluginSsr:!0,_isProduction:!0},{pageFilesAll:n,allPageIds:s}=await nt(!0);return g(t,{_pageFilesAll:n,_allPageIds:s}),t}async function Ee(e){const t=await Ae(),n={url:e,...t},s=t._pageFilesAll;z(n);const r=await ve(n);if(!("pageContextAddendum"in r))return{pageId:null,pageFilesAll:s};const i=r.pageContextAddendum._pageId;return i?{pageId:i,pageFilesAll:s}:{pageId:null,pageFilesAll:s}}function $(e){return e.exportNames?e.exportNames:(l(e.fileExports,e.pageId),Object.keys(e.fileExports))}function rn({pageFilesClientSide:e,pageFilesServerSide:t,pageId:n}){return{isHtmlOnly:s(),isClientRouting:i()};function s(){return t.some(d=>d.pageId===n&&d.fileType===".page")?(r(),!1):t.some(d=>d.pageId===n&&d.fileType===".page.server")}function r(){const o=e.some(a=>$(a).includes("render"));u(o,["No client-side `render()` hook found.","See https://vite-plugin-ssr.com/render-modes for more information.",["Loaded client-side page files (none of them `export { render }`):",...e.map((a,d)=>` (${d+1}): ${a.filePath}`)].join(`
`)].join(" "))}function i(){return e.some(a=>$(a).includes("clientRouting"))}}function sn({pageFilesClientSide:e,pageFilesServerSide:t,isHtmlOnly:n,isClientRouting:s}){let r=[];const i=t.filter(a=>!e.includes(a)),o=[];if(o.push(...e.map(a=>({id:a.filePath,onlyAssets:!1}))),o.push(...i.map(a=>({id:a.filePath,onlyAssets:!0}))),n)r=e.map(a=>a.filePath);else{const a=s?"@@vite-plugin-ssr/dist/esm/client/router/entry.js":"@@vite-plugin-ssr/dist/esm/client/entry.js";o.push({id:a,onlyAssets:!1}),r=[a]}return{clientEntries:r,clientDependencies:o}}function on(e,t){let n=pe(e,t);const s=xe(e,t),{isHtmlOnly:r,isClientRouting:i}=rn({pageFilesClientSide:n,pageFilesServerSide:s,pageId:t});r&&(n=n.filter(d=>d.fileType===".page.client"&&!$(d).includes("render")),n=ln(n));const{clientEntries:o,clientDependencies:a}=sn({pageFilesClientSide:n,pageFilesServerSide:s,isHtmlOnly:r,isClientRouting:i});return{isHtmlOnly:r,isClientRouting:i,clientEntries:o,clientDependencies:a,pageFilesClientSide:n,pageFilesServerSide:s}}async function an(e,t,{sharedPageFilesAlreadyLoaded:n}){const s=pe(e,t);await Promise.all(s.map(async r=>{var i;l(r.fileType===".page"||r.fileType===".page.client"),!(n&&r.fileType===".page")&&await((i=r.loadExportNames)===null||i===void 0?void 0:i.call(r))}))}function ln(e){const t=[];for(const n of e)if(t.push(n),$(n).includes("overrideDefaultPages"))break;return t}async function Ce(e){const{pageId:t,pageFilesAll:n}=await Ee(e);if(!t)return!1;await an(n,t,{sharedPageFilesAlreadyLoaded:!1});const{isHtmlOnly:s,isClientRouting:r}=on(n,t);return!s&&r}function Te(e){const t=e.getAttribute("href");return!!(t===null||t===""||Re(t)||un(e)||cn(t)||!fn(t)||!rt(t))}function un(e){const t=e.getAttribute("target"),n=e.getAttribute("rel");return t==="_blank"||t==="_external"||n==="external"||e.hasAttribute("download")}function cn(e){if(e.startsWith("#"))return!0;const t=n=>n.split("#")[0];return!!(e.includes("#")&&t(e)===t(window.location.href))}function fn(e){const t=we();ge(t);const{hasBaseUrl:n}=j(e,t);return n}function dn(e,t){const n=gn(e,t);return{prefetchPageContext:!1,prefetchStaticAssets:n}}function gn(e,t){let n=pn(t),s=(()=>{if(n!==null)return n===!0?{when:"VIEWPORT"}:{when:"HOVER"};if("prefetchLinks"in e.exports&&u(n===null,"`export { prefetchLinks }` is deprecated, use `export { prefetchStaticAssets }` instead."),"prefetchStaticAssets"in e.exports){const{prefetchStaticAssets:r}=e.exports;if(r===!1)return!1;const i="`prefetchStaticAssets` should be either `false`, `{ when: 'VIEWPORT' }`, or `{ when: 'HOVER' }`";u(b(r),i);const o=Object.keys(r);u(o.length===1&&o[0]==="when",i);const{when:a}=r;if(a==="HOVER"||a==="VIEWPORT")return{when:a};u(!1,i)}return{when:"HOVER"}})();return s&&s.when==="VIEWPORT"&&!e._isProduction&&(he(!1,"Viewport prefetching is disabled in development, see https://vite-plugin-ssr.com/clientRouting",{onlyOnce:!0}),s={when:"HOVER"}),s}function pn(e){let t=e.getAttribute("data-prefetch");if(P(t===null,"The `data-prefetch` attribute is outdated.",{onlyOnce:!0}),t===null)return null;if(l(typeof t=="string"),t==="true")return!0;if(t==="false")return!1;u(!1,`Wrong data-prefetch value: \`"${t}"\`; it should be \`"true"\` or \`"false"\`.`)}const Ie=new Map;function ke(e){const t=$e(e);return Ie.has(t)}function We(e){const t=$e(e);Ie.set(t,!0)}function $e(e){return Ht(e)}const ae=new Map;async function V(e){if(u(!Re(e),`You are trying to prefetch ${e} which is an external URL. This doesn't make sense since vite-plugin-ssr cannot prefetch external links.`),ke(e))return;We(e);const{pageId:t,pageFilesAll:n}=await Ee(e);if(t)try{await O(n,t)}catch(s){if(me(s))Le();else throw s}}function hn(e){We(e.url),[...document.getElementsByTagName("A")].forEach(async n=>{if(ae.has(n))return;ae.set(n,!0);const s=n.getAttribute("href");if(Te(n)||(l(s),!await Ce(s))||ke(s))return;const r=dn(e,n);if(r.prefetchStaticAssets){if(r.prefetchStaticAssets.when==="HOVER")n.addEventListener("mouseover",()=>V(s)),n.addEventListener("touchstart",()=>V(s),{passive:!0});else if(r.prefetchStaticAssets.when==="VIEWPORT"){const i=new IntersectionObserver(o=>{o.forEach(a=>{a.isIntersecting&&(V(s),i.disconnect())})});i.observe(n)}}else return})}function mn(){const e=yn();M(e),q(e)}function yn(){let e=Ne(),t=je(),n=window.history.state;return n||(n={}),"timestamp"in n||(n.timestamp=e),"scrollPosition"in n||(n.scrollPosition=t),M(n),n}function J(){const e=window.history.state;return M(e),e}function je(){return{x:window.scrollX,y:window.scrollY}}function Ne(){return new Date().getTime()}function le(){const e=je(),t=J();q({...t,scrollPosition:e})}function _n(e,t){if(t)q(J(),e);else{const n=Ne();bn({timestamp:n,scrollPosition:null},e)}}function M(e){const t="Manipulating `window.history.state` is forbidden (only vite-plugin-ssr is allowed to). Does one of your library try to manipulate it?";u(b(e),t),u("timestamp"in e,t),u("scrollPosition"in e,t),u(Object.keys(e).length===2,t);const{timestamp:n}=e;u(typeof n=="number",t);const{scrollPosition:s}=e;s!==null&&(u(f(s,"x","number")&&f(s,"y","number"),t),u(Object.keys(s).length===2,t))}function q(e,t){window.history.replaceState(e,"",t)}function bn(e,t){window.history.pushState(e,"",t)}On();mn();let C,He=!1;function Le(){He=!0,he(!1,"New deployed frontend detected. The next page navigation will use Server Routing instead of Client Routing.",{onlyOnce:!0})}function vn(){xn(),Pn((r,{keepScrollPosition:i})=>{s({scrollTarget:i?"preserve-scroll":"scroll-to-top-or-hash",url:r,isBackwardNavigation:!1})}),wn((r,i)=>{s({scrollTarget:r,isBackwardNavigation:i})}),globalThis.__vite_plugin_ssr__navigate=async(r,{keepScrollPosition:i,overwriteLastHistoryEntry:o})=>{await s({scrollTarget:i?"preserve-scroll":"scroll-to-top-or-hash",url:r,overwriteLastHistoryEntry:o,isBackwardNavigation:!1})};let e=0,t,n=!1;s({scrollTarget:"preserve-scroll",isBackwardNavigation:null});return;async function s({scrollTarget:r,url:i=A(),overwriteLastHistoryEntry:o=!1,isBackwardNavigation:a}){var d,p;if(He){H(i);return}const c={url:i,isBackwardNavigation:a},m=++e;l(m>=1),m>1&&n===!1&&(C==null||C(c),n=!0);const S=()=>Bt()&&m===1?!1:m!==e,x=await Ae();if(S())return;const y=m===1;g(c,{_isFirstRenderAttempt:y}),g(c,x),z(c);let v;try{v=await Mt(c)}catch(h){if(ce(h,c))return;console.error(h);try{v=await Qt(c)}catch(_){if(ce(_,c)||(y||setTimeout(()=>{window.location.pathname=i},0),Dt(h,_)))return;throw _}}S()||(g(c,v),U(c,"onPageTransitionStart"),C=c.exports.onPageTransitionStart,t&&await t,!S()&&(Rn(i,o),Se.markNavigationChange(),l(t===void 0),t=(async()=>{const h=Fe(c);st(c);const _=await c.exports.render(h);u(_===void 0,"`export { render }` of "+c.exportsAll.render[0]._filePath+" should not return any value"),hn(c)})(),await t,t=void 0,c._isFirstRenderAttempt?(U(c,"onHydrationEnd"),await((p=(d=c.exports).onHydrationEnd)===null||p===void 0?void 0:p.call(d,c))):m===e&&(c.exports.onPageTransitionEnd&&(U(c,"onPageTransitionEnd"),c.exports.onPageTransitionEnd(c)),n=!1),Sn(r),X(),Ue=!0))}}function Pn(e){document.addEventListener("click",t);return;async function t(r){if(!n(r))return;const i=s(r.target);if(!i)return;const o=i.getAttribute("href");if(Te(i))return;if(l(o),r.preventDefault(),!await Ce(o)){H(o);return}const a=![null,"false"].includes(i.getAttribute("keep-scroll-position"));e(o,{keepScrollPosition:a})}function n(r){return r.button===0&&!r.ctrlKey&&!r.shiftKey&&!r.altKey&&!r.metaKey}function s(r){for(;r.tagName!=="A";){const{parentNode:i}=r;if(!i)return null;r=i}return r}}let W=Q();function wn(e){window.addEventListener("popstate",t=>{const{historyState:n,urlWithoutHash:s}=Q();if(l(n===t.state),s===W.urlWithoutHash)return;const r=n.timestamp<W.historyState.timestamp;W={urlWithoutHash:s,historyState:n};const o=n.scrollPosition||"scroll-to-top-or-hash";e(o,r)})}function Rn(e,t){A()!==e&&(X(),_n(e,t),W=Q())}function Q(){return{urlWithoutHash:A({withoutHash:!0}),historyState:J()}}function Sn(e){if(e==="preserve-scroll")return;let t;if(e==="scroll-to-top-or-hash"){const r=Fn();if(r&&r!=="top"){const i=document.getElementById(r)||document.getElementsByName(r)[0];if(i){i.scrollIntoView();return}}t={x:0,y:0}}else l("x"in e&&"y"in e),t=e;const{x:n,y:s}=t;window.scrollTo(n,s)}function xn(){window.addEventListener("scroll",Nt(le,Math.ceil(1e3/3)),{passive:!0}),Be(le)}function Fn(){let{hash:e}=window.location;return e===""?null:(l(e.startsWith("#")),e=e.slice(1),e)}let Ue=!1;function On(){ue(),Be(ue),An(()=>Ue&&X())}function X(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")}function ue(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto")}function Be(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()})}function An(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&e()})}function ce(e,t){return!!(e!=null&&e._abortRendering||En(e,t))}function En(e,t){if(!me(e))return!1;if(Le(),t._isFirstRenderAttempt)throw e;return H(t.url),!0}vn();
